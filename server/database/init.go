package database

func (db *Database) init() error {
	_, err := db.db.Exec(`
	CREATE TABLE IF NOT EXISTS USERS (
	    ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	    NAME TEXT NOT NULL UNIQUE,
	    PASSWORD TEXT,
	    SCREEN_NAME TEXT NOT NULL,
	    ROLE INTEGER NOT NULL
	);

	CREATE TABLE IF NOT EXISTS TEAMS (
		TEAM INTEGER NOT NULL PRIMARY KEY,
	    NAME TEXT NOT NULL UNIQUE
	);

	CREATE TABLE IF NOT EXISTS GAMES (
	  	ID INTEGER NOT NULL PRIMARY KEY,
	  	GAME_TYPE INTEGER DEFAULT (0),
	  	
	  	RED_TEAM1 INTEGER NOT NULL REFERENCES TEAMS,
	  	RED_TEAM2 INTEGER NOT NULL REFERENCES TEAMS,
	  	BLUE_TEAM1 INTEGER NOT NULL REFERENCES TEAMS,
	  	BLUE_TEAM2 INTEGER NOT NULL REFERENCES TEAMS,
	  	
	  	RED_SCOUTER1 INTEGER NOT NULL REFERENCES USERS,
	  	RED_SCOUTER2 INTEGER NOT NULL REFERENCES USERS,
	  	BLUE_SCOUTER1 INTEGER NOT NULL REFERENCES USERS,
	  	BLUE_SCOUTER2 INTEGER NOT NULL REFERENCES USERS
	);

	CREATE TABLE IF NOT EXISTS FORM_ANSWERS (
		ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
		SCOUTER INTEGER NOT NULL REFERENCES USERS,
		GAME INTEGER NOT NULL REFERENCES GAMES,
		TEAM INTEGER NOT NULL REFERENCES TEAMS,
		Location TEXT NOT NULL,
		
		TEAM_ELEMENT TEXT NOT NULL,
		AUTO_DUCK TEXT NOT NULL,
		AUTO_STORAGE TEXT NOT NULL,
		AUTO_SHIPPING TEXT NOT NULL,
		CUBE_LEVEL INTEGER NOT NULL,
		PARKING TEXT NOT NULL,
		
		STORAGE INTEGER NOT NULL,
		SHIPPING_LOW INTEGER NOT NULL,
		SHIPPING_MID INTEGER NOT NULL,
		SHIPPING_HIGH INTEGER NOT NULL,
		SHARED INTEGER NOT NULL,
		DUCKS INTEGER NOT NULL,
		CAPPING TEXT NOT NULL,
		WORKING TEXT NOT NULL,
		NOTES TEXT NOT NULL
	);
`)
	if err != nil {
		return err
	}

	return nil
}
